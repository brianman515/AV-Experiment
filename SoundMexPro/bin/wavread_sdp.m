%
%     Tool for usage of SoundMexPro with older MATLAB versions
% Copyright HoerTech gGmbH Oldenburg 2008, written by Daniel Berg
%
% This tool reads 32bit normalized floating point PCM wavefiles (not
% supported by older MATLAB versions) assuming a fixed data offset of 44
% byte.  NOTE: do not use this on other wavefiles than SoundMexPro
% recording or debugging files: the offset may be different in wavefiles
% generated by other applications!!
%

function data = wavread_sdp(filename);

% open file for reading
f = fopen(filename, 'r');
if f == 0
    error(['error opening file ' filename ' for reading']);
end

% skip PCM wavefile header. 
if 0 ~= fseek(f, 44, 'bof');
    error(['error reading file ' filename ': cannot move to beginning of data']);
end

% read normalized float values to return value
[data, count] = fread(f, 'float32');

% show warning, if no samples read
if count == 0
    warning(['no samples read from file ' filename ': may it is empty...']);
end

% close file
fclose(f);
